<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User&#39;s Guide · QXSim.jl</title><link rel="canonical" href="https://JuliaQX.github.io/QXSim.jl/users_guide/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="QXSim.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">QXSim.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li class="is-active"><a class="tocitem" href>User&#39;s Guide</a><ul class="internal"><li><a class="tocitem" href="#Parameter-File"><span>Parameter File</span></a></li><li><a class="tocitem" href="#DSL-Specification"><span>DSL Specification</span></a></li><li><a class="tocitem" href="#Data-File"><span>Data File</span></a></li></ul></li><li><span class="tocitem">Tutorials</span></li><li><a class="tocitem" href="../license/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>User&#39;s Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>User&#39;s Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaQX/QXSim.jl/blob/master/docs/src/users_guide.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="User&#39;s-Guide"><a class="docs-heading-anchor" href="#User&#39;s-Guide">User&#39;s Guide</a><a id="User&#39;s-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#User&#39;s-Guide" title="Permalink"></a></h1><p>QXSim generates output files which provide a description of the computations and data required to perform the simulation. There are three output files:</p><ul><li>Parameter file: This YAML file provides informations on the sliced edges and dimensions as well</li></ul><p>as details of the output amplitudes or sampling method</p><ul><li>DSL file: The DSL file contains instructions describing the tensor operations involved in</li></ul><p>performing the contraction</p><ul><li>Data file: The data file contains the numerical values of the initial tensors of the tensor</li></ul><p>network</p><h2 id="Parameter-File"><a class="docs-heading-anchor" href="#Parameter-File">Parameter File</a><a id="Parameter-File-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-File" title="Permalink"></a></h2><p>To distribute the computation over multiple processes and nodes, a number of edges of the tensor network are sliced. The computation is then divided into multiple smaller computations, each having a particular assignment of values on the sliced edges. The details of which edges are sliced and the dimension of these is described in the parameter file. In addition to this, the outputs to use when contracting the network are also described in the parameter file. An example of a parameter file is as follows</p><pre><code class="language-none">amplitudes:
  - &quot;00&quot;
  - &quot;01&quot;  
partitions:
  parameters:
    v2: 2
    v1: 2</code></pre><p>This tells us there are two edges that will be sliced, each with dimension 2 and that the computation should be performed by setting the outputs to each of the four bitstrings given in the file. In future it will be possible to specify parameter of the sampling method to use for selecting which bitstrings to calculate the amplitude of instead of each being listed.</p><p>The above parameter file will result in the contraction described in the DSL file being performed eight times with different substitutions in each case. The full list of substitutions is</p><table><tr><th style="text-align: right">v1</th><th style="text-align: right">v2</th><th style="text-align: right">o1</th><th style="text-align: right">o2</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_1</td></tr><tr><td style="text-align: right">1</td><td style="text-align: right">2</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_1</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">1</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_1</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">2</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_1</td></tr><tr><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_2</td></tr><tr><td style="text-align: right">1</td><td style="text-align: right">2</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_2</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">1</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_2</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">2</td><td style="text-align: right">o1_1</td><td style="text-align: right">o2_2</td></tr></table><p>The final scalar output of the four different substitutions for each output set are summed to get the final output amplitude. This means that each of these contractions can be performed independently on different processes/nodes with a reduction operation performed on the scalars resulting from each contraction.</p><h2 id="DSL-Specification"><a class="docs-heading-anchor" href="#DSL-Specification">DSL Specification</a><a id="DSL-Specification-1"></a><a class="docs-heading-anchor-permalink" href="#DSL-Specification" title="Permalink"></a></h2><p>A Domain Specific Language (DSL) has been defined when enables better separation  of concerns between the components. This DSL describes a contraction over a tensor network to calculate observables of interest in the form of a sequence of instructions which act on individual tensors. This makes it possible to separate the development of the high performance distributed tensor network computation code from that of the higher level contraction planning, circuit and and network manipulation code. For QXSim DSL files the &quot;.tl&quot; suffix is used for &quot;Tensor Language&quot;. We will first show a very simple example of a QXSim DSL file and then descibe in detail how each of the instructions work.</p><h3 id="Example-DSL-file"><a class="docs-heading-anchor" href="#Example-DSL-file">Example DSL file</a><a id="Example-DSL-file-1"></a><a class="docs-heading-anchor-permalink" href="#Example-DSL-file" title="Permalink"></a></h3><p>An example of the DSL generated for the contraction of a two qubit GHZ circuit looks like.</p><pre><code class="language-none"># version: 0.1
outputs 2
load t1 data_1
load t2 data_2
load t3 data_3
load t4 data_4
load t5 data_4
view t13_$v1 t13 3 $v1
del t13
view t14_$v1 t14 1 $v1
del t14
view t12_$v2 t12 1 $v2
del t12
view t14_$v1_$v2 t14_$v1 3 $v2
del t14_$v1
ncon t15 $o1 1 t14_$v1_$v2 -1,1,-2
del $o1
del t14_$v1_$v2
ncon t16 t8 1 t12_$v2 -1,1
del t8
del t12_$v2
ncon t17 t9 1 t13_$v1 -1,1,-2
del t9
del t13_$v1
ncon t18 $o2 1 t17 1,-1
del $o2
del t17
ncon t19 t15 -1,1 t16 1
del t15
del t16
ncon t20 t19 1 t18 1
del t19
del t18
save t20 output</code></pre><h3 id="DSL-Format-and-Instructions"><a class="docs-heading-anchor" href="#DSL-Format-and-Instructions">DSL Format and Instructions</a><a id="DSL-Format-and-Instructions-1"></a><a class="docs-heading-anchor-permalink" href="#DSL-Format-and-Instructions" title="Permalink"></a></h3><p>The DSL file is a regular ASCII text file with one instruction per line. Lines beginning with <code>#</code> are comments which are ignored (except for the first line which contains version information). The first line should have a version string which specifies the format version. Symbols prefixed by a dollar sign indicate variables which are take different values for each iteration of the computation. An explanation of each instruction follows</p><h4 id="Outputs"><a class="docs-heading-anchor" href="#Outputs">Outputs</a><a id="Outputs-1"></a><a class="docs-heading-anchor-permalink" href="#Outputs" title="Permalink"></a></h4><pre><code class="language-none">outputs 2</code></pre><p>This line indicates that the tensor network has two output tensors. This will create symbols for each of the possible values of these output tensors. For a quantum circuit, measurement is performed the computational basis which means that the possible values for the output tensors are the vectors <code>[1, 0]</code> and <code>[0, 1]</code> corresponding to the <span>$| 0 \rangle$</span> and <span>$| 1 \rangle$</span> states respectively. For two outputs the following symbols and mappings will be defined</p><pre><code class="language-none">o1_0 =&gt; [1, 0]
o1_1 =&gt; [0, 1]
o2_0 =&gt; [1, 0]
o2_1 =&gt; [0, 1]</code></pre><h4 id="Load"><a class="docs-heading-anchor" href="#Load">Load</a><a id="Load-1"></a><a class="docs-heading-anchor-permalink" href="#Load" title="Permalink"></a></h4><p>Load instructions define a new tensor symbol using data from the input file. Here the first argument is the name of the new symbol and the second argument is the key to find the data in the input <a href="#Data-File">Data File</a>. Mulitple tensor symbols can have the same data associated with them. In the following example both <code>t4</code> and <code>t5</code> will have the same data associated with them.</p><pre><code class="language-none">load t1 data_1
load t2 data_2
load t3 data_3
load t4 data_4
load t5 data_4</code></pre><h4 id="View"><a class="docs-heading-anchor" href="#View">View</a><a id="View-1"></a><a class="docs-heading-anchor-permalink" href="#View" title="Permalink"></a></h4><p>A view instruction creates a new tensor symbol by taking a view of an existing tensor. The first argument is the new symbol name, the second is the symbol of the tesnor to take the view on, the third argument is the dimension and the final value is the particular value for that dimension. An example view command is as follows</p><pre><code class="language-none">view t13_$v1 t13 3 $v1</code></pre><p>The <code>$v1</code> variable will be replaced by a particular value before execution as described in the <a href="#Parameter-File">Parameter File</a> section.</p><h4 id="Delete"><a class="docs-heading-anchor" href="#Delete">Delete</a><a id="Delete-1"></a><a class="docs-heading-anchor-permalink" href="#Delete" title="Permalink"></a></h4><p>The <code>del</code> instructions marks a particular tensor for deletion and indicates that it will not be used for the rest of that contraction.</p><h4 id="Contraction"><a class="docs-heading-anchor" href="#Contraction">Contraction</a><a id="Contraction-1"></a><a class="docs-heading-anchor-permalink" href="#Contraction" title="Permalink"></a></h4><p>The <code>ncon</code> instruction specificies a pairwise contraction of tensors. An example contraction command is as follows</p><pre><code class="language-none">ncon t15 $o1 1 t14_$v1_$v2 -1,1,-2</code></pre><p>Which indicates that the <code>$o1</code> tensor should be contracted with the <code>t14_$v1_v2</code> tensor to get the <code>t15</code> tensor. The contraction should be performed over the only rank of the <code>$o1</code> tensor and the second rank of the <code>t14_$v1_$v2</code> tensor. The notation used for specifying which indices to contract over uses the convention that negative indices indicate that this rank will remain and  repeated positive indices indicate ranks that are contracted over, similar to Einstein notation. For the case where one of the tensors is a scalar a <code>0</code> is used as a placeholder for the indices. For example if <code>t1</code> is a scalar tensor and <code>t2</code> is a matrix, the multiplication of the matrix by the scalar can be expressed as</p><pre><code class="language-none">ncon t3 t1 0 t2 -1,-2</code></pre><h4 id="Save"><a class="docs-heading-anchor" href="#Save">Save</a><a id="Save-1"></a><a class="docs-heading-anchor-permalink" href="#Save" title="Permalink"></a></h4><p>The save instruction indicates that the given tensor is an output from the contraction and provides a label for this. The value of this tensor will then be used in a reduction operation and/or written to the output file.</p><h2 id="Data-File"><a class="docs-heading-anchor" href="#Data-File">Data File</a><a id="Data-File-1"></a><a class="docs-heading-anchor-permalink" href="#Data-File" title="Permalink"></a></h2><p>The data file is a <a href="https://github.com/JuliaIO/JLD.jl">JLD</a> file and contains the numerical values of the initial tensors. Each tensor is stored as a multi-dimensional array with a data label that is referenced in <code>load</code> commands of the DSL file.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../getting_started/">« Getting Started</a><a class="docs-footer-nextpage" href="../license/">LICENSE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 10 March 2021 15:56">Wednesday 10 March 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
